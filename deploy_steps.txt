DEPLOY STEPS (summary)

-- A. Create DynamoDB Table (CLI) --
aws dynamodb create-table --table-name DataEntryTable --attribute-definitions AttributeName=id,AttributeType=S --key-schema AttributeName=id,KeyType=HASH --provisioned-throughput ReadCapacityUnits=5,WriteCapacityUnits=5 --region us-east-1

-- B. Local backend quick run --
cd backend
python3 -m venv venv
source venv/bin/activate    # windows: venv\Scripts\activate
pip install -r requirements.txt
export AWS_REGION=us-east-1
export DYNAMO_TABLE=DataEntryTable
python app.py

-- C. Deploy Frontend (Amplify) --
# from project root
cd frontend
npm install
npm run build
# Option 1: Amplify
amplify init
amplify add hosting
amplify publish
# Option 2: S3 + CloudFront
aws s3 mb s3://my-data-entry-frontend
aws s3 sync build/ s3://my-data-entry-frontend
# configure CloudFront for the bucket to serve as website.

-- D. Backend: Deploy to AWS Lambda (serverless) --
# Option 1: Lambda container image (recommended for Flask Dockerfile)
# Build image
docker build -t data-entry-backend:latest backend
# Tag & push to ECR. Then create Lambda from container image.

# Option 2: Lambda using ZIP and awsgi
# pip install awsgi
# create a deployment package including dependencies (use Lambda layer or zip)
# set handler to serverless_handler.lambda_handler which uses awsgi

# Configure API Gateway (HTTP API or REST) and connect routes:
# POST /add -> Lambda
# GET  /list -> Lambda

-- E. Backend: Deploy to ECS (container) --
# Build and push docker image to ECR
aws ecr create-repository --repository-name data-entry-backend
# Tag and push image to ECR, then create ECS cluster and task definition referencing the image.
# Use Fargate for serverless container hosting.

-- F. IAM & Permissions --
# Lambda/ECS task role should have permissions for DynamoDB (PutItem, Scan)
# Example minimal policy:
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect":"Allow",
      "Action":[
        "dynamodb:PutItem",
        "dynamodb:Scan",
        "dynamodb:GetItem",
        "dynamodb:Query"
      ],
      "Resource":"arn:aws:dynamodb:*:*:table/DataEntryTable"
    }
  ]
}

-- G. Frontend environment --
# Set REACT_APP_API_BASE in your hosting service to point to the API Gateway base URL.

Notes:
- Replace region, table name, bucket names and ARNs with your desired values.
- For production, enable authentication (Cognito) and validation, and use pagination for DynamoDB scans.
